-- library declaration
library IEEE;
use IEEE.std_logic_1164.all;
-- entity
entity ckt_rtl is
    port (X,Y,Z : in std_logic_vector(7 downto 0);
    CLK, DS         : in std_logic;
    MS          : in std_logic_vector(1 downto 0);
    RB          : inout std_logic_vector(7 downto 0));
end ckt_rtl;
-- architecture
architecture rtl_behavioral of ckt_rtl is
-- intermediate signal declaration ---------------
signal s_mux_result, RA_result : std_logic_vector(7 downto 0);
signal decoder_resultA,decoder_resultB : std_logic;

begin
    r_b: process(CLK) -- process
    begin
        if (rising_edge(NOT(CLK))) then
            if (decoder_resultB = '1') then
                RB <= RA_result;
            end if;
        end if;
end process;

    r_a: process(CLK) -- process
    begin
        if (rising_edge(NOT(CLK))) then
            if (decoder_resultA = '1') then
                RA_result <= s_mux_result;
            end if;
        end if;
end process;

decoder: process(CLK) -- process
    begin
    
        if(DS = '1') then
            decoder_resultA <='0';
            decoder_resultB <='1';
        end if;
        if(DS = '0') then
                    decoder_resultA <='1';
                    decoder_resultB <='0';
                end if;
end process;

with MS select
s_mux_result <= X when "11",
                Y when "10",
                Z when "01",
                RB when "00";
                end rtl_behavioral;
